schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/data/data_ingestion.py /data/raw
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: a62472a6a0dd4599aca5f10ede80e02a
      size: 2338
    outs:
    - path: ./data/raw/rawdata.csv
      hash: md5
      md5: f80ec6d8dd9eb97dca80aa287e30c542
      size: 6888954
  make_dataset:
    cmd: python ./src/data/make_dataset.py /data
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: a62472a6a0dd4599aca5f10ede80e02a
      size: 2338
    - path: ./src/data/make_dataset.py
      hash: md5
      md5: d1bd80044bb3ca9f66a94a3565bc5d05
      size: 3818
    params:
      params.yaml:
        data_transformation.seed: 45
        data_transformation.split_dataset_size: 0.35
    outs:
    - path: ./data/interim/preprocess_testdata.csv
      hash: md5
      md5: 9306fc44dc732e8063fd6dca28211e32
      size: 1776009
    - path: ./data/interim/preprocess_traindata.csv
      hash: md5
      md5: 841e8065f32eb501b299f02686c55d1f
      size: 3321847
  build_features:
    cmd: python ./src/features/build_features.py /data
    deps:
    - path: ./src/data/make_dataset.py
      hash: md5
      md5: d1bd80044bb3ca9f66a94a3565bc5d05
      size: 3818
    - path: ./src/features/build_features.py
      hash: md5
      md5: bbebdd2ea289388a843280cee125f5e2
      size: 3642
    params:
      params.yaml:
        build_features.max_features: 15000
        build_features.ngram_range:
        - 1
        - 3
    outs:
    - path: ./data/external/processed_testdata.csv
      hash: md5
      md5: 88d4dee1fd205d9c346074d116039d7c
      size: 776184703
    - path: ./data/external/processed_traindata.csv
      hash: md5
      md5: 8dd4fcd525505775c549bd67246beb40
      size: 1441498856
    - path: ./models/vectorizer.pkl
      hash: md5
      md5: 20ba9be8d4cac2ecf08087d6a0896793
      size: 583472
  train_model:
    cmd: python ./src/models/train_model.py /data/external
    deps:
    - path: ./data/external/processed_traindata.csv
      hash: md5
      md5: 8dd4fcd525505775c549bd67246beb40
      size: 1441498856
    - path: ./src/models/train_model.py
      hash: md5
      md5: 24c7297d72e6f1e087d596ee216b2184
      size: 2695
    params:
      params.yaml:
        train_model.learning_rate: 0.08
        train_model.max_depth: 23
        train_model.n_estimators: 367
    outs:
    - path: ./models/model.pkl
      hash: md5
      md5: 87bdefff58716fa6c8606d9e6fe8337a
      size: 4138350
  predict_model:
    cmd: python ./src/models/predict_model.py /data/external
    deps:
    - path: ./data/external/processed_testdata.csv
      hash: md5
      md5: 88d4dee1fd205d9c346074d116039d7c
      size: 776184703
    - path: ./models/model.pkl
      hash: md5
      md5: 87bdefff58716fa6c8606d9e6fe8337a
      size: 4138350
    - path: ./src/models/predict_model.py
      hash: md5
      md5: 7a89c21b43e7f308d906b9160345048b
      size: 6869
    outs:
    - path: ./reports/metrics.json
      hash: md5
      md5: d4cf342714378e854adc7b52128e8c75
      size: 873
    - path: ./reports/model_experiment_info.json
      hash: md5
      md5: 1a34b95391604219824e4778f1e7d9f6
      size: 80
  register_model:
    cmd: python ./src/models/register_model.py
    deps:
    - path: ./reports/model_experiment_info.json
      hash: md5
      md5: 1a34b95391604219824e4778f1e7d9f6
      size: 80
    - path: ./src/models/register_model.py
      hash: md5
      md5: 15180c705aa81cce1bbdb697ec30fd3c
      size: 2345
  promote_model:
    cmd: python ./src/models/promote_model.py
    deps:
    - path: ./reports/model_experiment_info.json
      hash: md5
      md5: 1a34b95391604219824e4778f1e7d9f6
      size: 80
    - path: ./src/models/promote_model.py
      hash: md5
      md5: 41f817cb4ccde34ce6d6460ff1661fb8
      size: 1395
