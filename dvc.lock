schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/data/data_ingestion.py /data/raw
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: a62472a6a0dd4599aca5f10ede80e02a
      size: 2338
    outs:
    - path: ./data/raw/rawdata.csv
      hash: md5
      md5: f80ec6d8dd9eb97dca80aa287e30c542
      size: 6888954
  make_dataset:
    cmd: python ./src/data/make_dataset.py /data
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: a62472a6a0dd4599aca5f10ede80e02a
      size: 2338
    - path: ./src/data/make_dataset.py
      hash: md5
      md5: d1bd80044bb3ca9f66a94a3565bc5d05
      size: 3818
    params:
      params.yaml:
        data_transformation.seed: 45
        data_transformation.split_dataset_size: 0.36
    outs:
    - path: ./data/interim/preprocess_testdata.csv
      hash: md5
      md5: ec3e90d4dfa93949dacfbb9f544ee0ba
      size: 1826062
    - path: ./data/interim/preprocess_traindata.csv
      hash: md5
      md5: 75ec48514bd6b221b465ae2002048c7f
      size: 3271794
  build_features:
    cmd: python ./src/features/build_features.py /data
    deps:
    - path: ./src/data/make_dataset.py
      hash: md5
      md5: d1bd80044bb3ca9f66a94a3565bc5d05
      size: 3818
    - path: ./src/features/build_features.py
      hash: md5
      md5: bbebdd2ea289388a843280cee125f5e2
      size: 3642
    params:
      params.yaml:
        build_features.max_features: 16000
        build_features.ngram_range:
        - 1
        - 3
    outs:
    - path: ./data/external/processed_testdata.csv
      hash: md5
      md5: 22b52d319f7d597bb0bb7048c5668703
      size: 851385545
    - path: ./data/external/processed_traindata.csv
      hash: md5
      md5: 8fa9310a16b61ff493dbcc0f271ad213
      size: 1513577437
    - path: ./models/vectorizer.pkl
      hash: md5
      md5: dfc25d43614c5501c27107cfc3ee5e87
      size: 623524
  train_model:
    cmd: python ./src/models/train_model.py /data/external
    deps:
    - path: ./data/external/processed_traindata.csv
      hash: md5
      md5: 8fa9310a16b61ff493dbcc0f271ad213
      size: 1513577437
    - path: ./src/models/train_model.py
      hash: md5
      md5: 24c7297d72e6f1e087d596ee216b2184
      size: 2695
    params:
      params.yaml:
        train_model.learning_rate: 0.08
        train_model.max_depth: 24
        train_model.n_estimators: 367
    outs:
    - path: ./models/model.pkl
      hash: md5
      md5: fdcfd0db85aebf4b080ef122bf39de45
      size: 4166804
  predict_model:
    cmd: python ./src/models/predict_model.py /data/external
    deps:
    - path: ./data/external/processed_testdata.csv
      hash: md5
      md5: 22b52d319f7d597bb0bb7048c5668703
      size: 851385545
    - path: ./models/model.pkl
      hash: md5
      md5: fdcfd0db85aebf4b080ef122bf39de45
      size: 4166804
    - path: ./src/models/predict_model.py
      hash: md5
      md5: 04f0f927bef7a16a335f313e38e684ed
      size: 6289
    outs:
    - path: ./reports/metrics.json
      hash: md5
      md5: f33774cb9b4f073c94cff87ee07c95a8
      size: 874
    - path: ./reports/model_experiment_info.json
      hash: md5
      md5: 78bf7a42de636faa31648fa2e3bf4fbc
      size: 80
  register_model:
    cmd: python ./src/models/register_model.py
    deps:
    - path: ./reports/model_experiment_info.json
      hash: md5
      md5: 78bf7a42de636faa31648fa2e3bf4fbc
      size: 80
    - path: ./src/models/register_model.py
      hash: md5
      md5: 15180c705aa81cce1bbdb697ec30fd3c
      size: 2345
  promote_model:
    cmd: python ./src/models/promote_model.py
    deps:
    - path: ./reports/model_experiment_info.json
      hash: md5
      md5: 78bf7a42de636faa31648fa2e3bf4fbc
      size: 80
    - path: ./src/models/promote_model.py
      hash: md5
      md5: 41f817cb4ccde34ce6d6460ff1661fb8
      size: 1395
